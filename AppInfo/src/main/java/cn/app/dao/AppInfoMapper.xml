<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "mybatis.org//DTD mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.app.dao.AppInfoMapper">


	<!-- /** 查询所有APP信息*/ public List<AppInfo> getAppInfoList(AppInfo appInfo); -->
	<resultMap type="AppInfo" id="userRoleName">
		<result column="rolename" property="userRoleName"/>
	</resultMap>
	<select id="getAppInfoList" resultType="AppInfo">
		select
		softwareName,APKName,softwareSize,flatformId,categoryLevel1,categoryLevel2,categoryLevel3,status,downloads,versionNo
		from app_info i , app_version v
		where i.versionId=v.id 
		<if test="softwareName!=null and softwareName!=''">
			 and softwareName like contat(%,#{softwareName},%)
		</if>
		<!-- 
		case
  when studentresult>=90 then 'A级'
  when studentresult between 80 and 89 then 'B级'
  when studentresult between 70 and 79 then 'C级'
  when studentresult between 60 and 69 then 'D级'
  else 'E级'
end
		
		order by id limit #{from},15 -->
	</select>

	<!-- /**根据ID查询APP信息*/public Integer getAppInfoById(Integer id); -->
	<select id="getAppInfoById" parameterType="int">
		select
		softwareName,APKName,softwareSize,flatformId,categoryLevel1,categoryLevel2,categoryLevel3,status,downloads,versionNo
		from app_info inner app_version version
		where info.versionId=version.id and id=#{id}
	</select>

	<!-- /** 增加APP信息*/public Integer addAppInfo(AppInfo appInfo); -->
	<insert id="addAppInfo">
		insert into app_info
		(softwareName,APKName,supportROM,interfaceLanguage,softwareSize,updateDate,devId,appInfo,
		onSaleDate,categoryLevel1,categoryLevel2,categoryLevel3,createdBy,creationDate,logoPicPath,logoLocPath,versionId)
		values(#{softwareName},#{APKName},#{supportROM},#{interfaceLanguage},#{softwareSize},#{updateDate},#{devId},#{appInfo}，
		#{onSaleDate},#{categoryLevel1},#{categoryLevel2},#{categoryLevel3},#{createdBy},#{creationDate},#{logoPicPath},#{logoLocPath},#{versionId})
	</insert>

	<!-- /** 修改APP信息*/public Integer updateAppInfo(AppInfo appInfo); -->
	<update id="updateAppInfo" parameterType="AppInfo">
		update app_info set
		softwareName=#{softwareName},APKName=#{APKName},supportROM=#{supportROM},interfaceLanguage=#{interfaceLanguage},
		softwareSize=#{softwareSize},updateDate=#{updateDate},devId=#{devId},appInfo=#{appInfo},onSaleDate=#{onSaleDate},
		categoryLevel1=#{categoryLevel1},categoryLevel2=#{categoryLevel2},categoryLevel3=#{categoryLevel3},createdBy=#{createdBy},
		creationDate=#{creationDate},logoPicPath=#{logoPicPath},logoLocPath=#{logoLocPath}
	</update>
	
	<!-- /**根据ID 删除APP信息*/public Integer deleteAppInfo(AppInfo appInfo); -->
	<delete id="deleteAppInfo" parameterType="int">
	delete from app_info
	where id=#{id}
	</delete>
	
	
	


</mapper>
